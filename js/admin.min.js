!function(c,t,e){t.wp=t.wp||{},t.wp.coreactivity=t.wp.coreactivity||{},t.wp.coreactivity.admin={toggles:{on:"d4p-ui-toggle-on",off:"d4p-ui-toggle-off"},counter:{value:10,show:10,status:!0},init:function(){var t=c.extend({},wp.dev4press.dialogs.default_dialog(),{width:600,maxWidth:720,maxHeight:640,minWidth:360,minHeight:240,resizable:!0,buttons:[c.extend({},wp.dev4press.dialogs.default_button("ok",!0),{click:function(){c("#coreactivity-log-dialog").wpdialog("close")}})]}),i=c.extend({},wp.dev4press.dialogs.default_dialog(),{width:600,maxWidth:720,maxHeight:640,minWidth:360,minHeight:360,resizable:!0,buttons:[c.extend({},wp.dev4press.dialogs.default_button("ok",!0),{click:function(){c("#coreactivity-whois-dialog").wpdialog("close")}})]});c("#coreactivity-log-dialog").wpdialog(t),c("#coreactivity-whois-dialog").wpdialog(i),wp.dev4press.dialogs.icons("#coreactivity-log-dialog"),wp.dev4press.dialogs.icons("#coreactivity-whois-dialog"),c(e).on("click",".coreactivity-toggle-notification",function(t){t.preventDefault();const i=c(this),e=i.data("id"),a=i.data("key"),o=i.data("nonce");c.ajax({type:"POST",dataType:"json",data:{event:e,notification:a},url:ajaxurl+"?action=coreactivity_toggle_notification&_ajax_nonce="+o,success:function(t){wp.coreactivity.admin.helpers.toggle(i,t)}})}),c(e).on("click",".coreactivity-toggle-event",function(t){t.preventDefault();const i=c(this),e=i.data("id"),a=i.data("nonce");c.ajax({type:"POST",dataType:"json",data:{event:e},url:ajaxurl+"?action=coreactivity_toggle_event&_ajax_nonce="+a,success:function(t){wp.coreactivity.admin.helpers.toggle(i,t)}})}),c(e).on("click",".coreactivity-show-whois-popup",function(t){t.preventDefault(),c("#coreactivity-whois-dialog").wpdialog("open"),c.ajax({type:"POST",dataType:"html",data:{whois:c(this).data("ip")},url:ajaxurl+"?action=coreactivity_whois_ip&_ajax_nonce="+c(this).data("nonce"),success:function(t){c("#coreactivity-whois-dialog div").html(t)}})}),c(e).on("click",".coreactivity-show-view-popup",function(t){t.preventDefault();t=c(this).data("log");c("#coreactivity-popup-tabs-info").html(c("#coreactivity-popup-data-info-"+t).clone()),c("#coreactivity-popup-tabs-meta").html(c("#coreactivity-popup-data-meta-"+t).clone()),c("#coreactivity-popup-tabs-location").html(c("#coreactivity-popup-data-location-"+t).clone()),c("#coreactivity-popup-tabs-device").html(c("#coreactivity-popup-data-device-"+t).clone()),c("#coreactivity-log-dialog").wpdialog("open")})},columns:function(){c(e).on("change",".hide-column-tog",function(){var t=c(".wp-list-table thead tr > *:not(.hidden)").length;c(".wp-list-table tbody tr.coreactivity-hidden-row td").attr("colspan",t)}),c(e).on("click","thead th.column-meta, tfoot th.column-meta",function(t){t.preventDefault();var t=c(this).find("i"),i=c("thead th.column-meta i, tfoot th.column-meta i"),e=c(this).closest("table"),a=e.find("tbody tr.coreactivity-hidden-row"),e=e.find("tbody td.column-meta button i");t.hasClass("d4p-ui-chevron-square-up")?(a.addClass("__hidden"),e.removeClass("d4p-ui-chevron-square-up d4p-ui-chevron-square-down").addClass("d4p-ui-chevron-square-down"),i.removeClass("d4p-ui-chevron-square-up").addClass("d4p-ui-chevron-square-down")):(a.removeClass("__hidden"),e.removeClass("d4p-ui-chevron-square-up d4p-ui-chevron-square-down").addClass("d4p-ui-chevron-square-up"),i.removeClass("d4p-ui-chevron-square-down").addClass("d4p-ui-chevron-square-up"))}),c(e).on("click","td.column-meta button",function(t){t.preventDefault();var t=c(this).find("i"),i=c(this).parent().parent().next();t.hasClass("d4p-ui-chevron-square-up")?(i.addClass("__hidden"),t.removeClass("d4p-ui-chevron-square-up").addClass("d4p-ui-chevron-square-down")):(i.removeClass("__hidden"),t.removeClass("d4p-ui-chevron-square-down").addClass("d4p-ui-chevron-square-up"))})},helpers:{toggle:function(t,i){var e;i.hasOwnProperty("toggle")&&""!==i.toggle&&(e=wp.coreactivity.admin.toggles,t.find("i").removeClass(e.on).removeClass(e.off).addClass(e[i.toggle]),t.find("span").html(t.data(i.toggle)))}},live:{init:function(){setTimeout(wp.coreactivity.admin.live.ajax,1e4),setInterval(function(){var t;wp.coreactivity.admin.counter.status&&((t=wp.coreactivity.admin.counter.value<1?'<i class="d4p-icon d4p-ui-spinner d4p-icon-fw d4p-icon-spin"></i>':wp.coreactivity.admin.counter.value)!==wp.coreactivity.admin.counter.show&&c(".coreactivity-live-button strong").html(t),wp.coreactivity.admin.counter.value--,wp.coreactivity.admin.counter.show=t)},1e3)},ajax:function(){let a=[];const o=c(".coreactivity-grid-logs #the-list tr.coreactivity-hidden-row td").first().attr("colspan"),t=c(".coreactivity-grid-logs #the-list tr:not(.coreactivity-old-live-row) > td.hidden");c(".coreactivity-live-row").addClass("coreactivity-old-live-row").removeClass("coreactivity-standout").removeClass("coreactivity-live-row"),t.each(function(){var t=c(this).attr("class").split(" ")[0];a.indexOf(t)<0&&a.push(t)}),c.ajax({url:ajaxurl+"?action=coreactivity_live_logs",type:"post",dataType:"html",data:{args:JSON.stringify(coreactivity_live)},success:function(t){var i,e;0<t.length&&(i=t.indexOf("."),e=t.substring(0,i),t=t.substring(i+1),coreactivity_live.id=parseInt(e),c(".coreactivity-grid-logs #the-list").prepend(t),c(".coreactivity-live-row").addClass("coreactivity-standout"),c(".coreactivity-hidden-row.coreactivity-live-row > td").each(function(){c(this).attr("colspan",o)}),c(".coreactivity-live-row > td").each(function(){c(this).removeClass("hidden");let t=c(this).attr("class");t&&(t=t.split(" ")[0],-1<a.indexOf(t))&&c(this).addClass("hidden")})),setTimeout(wp.coreactivity.admin.live.ajax,1e4),wp.coreactivity.admin.counter.status=!0,wp.coreactivity.admin.counter.value=10}})}}},c(e).ready(function(){t.wp.coreactivity.admin.init(),0<c(".coreactivity-grid-logs").length&&(wp.coreactivity.admin.columns(),"Y"===coreactivity_data.live_updates)&&wp.coreactivity.admin.live.init()})}(jQuery,window,document);