!function(n,t,e){t.wp=t.wp||{},t.wp.coreactivity=t.wp.coreactivity||{},t.wp.coreactivity.admin={toggles:{on:"d4p-ui-toggle-on",off:"d4p-ui-toggle-off"},init:function(){n(e).on("click",".coreactivity-toggle-notification",function(t){t.preventDefault();const e=n(this),i=e.data("id"),a=e.data("key"),o=e.data("nonce");n.ajax({type:"POST",dataType:"json",data:{event:i,notification:a},url:ajaxurl+"?action=coreactivity_toggle_notification&_ajax_nonce="+o,success:function(t){wp.coreactivity.admin.helpers.toggle(e,t)}})}),n(e).on("click",".coreactivity-toggle-event",function(t){t.preventDefault();const e=n(this),i=e.data("id"),a=e.data("nonce");n.ajax({type:"POST",dataType:"json",data:{event:i},url:ajaxurl+"?action=coreactivity_toggle_event&_ajax_nonce="+a,success:function(t){wp.coreactivity.admin.helpers.toggle(e,t)}})})},columns:function(){n(e).on("change",".hide-column-tog",function(){var t=n(".wp-list-table thead tr > *:not(.hidden)").length;n(".wp-list-table tbody tr.coreactivity-hidden-row td").attr("colspan",t)}),n(e).on("click","thead th.column-meta, tfoot th.column-meta",function(t){t.preventDefault();var t=n(this).find("i"),e=n("thead th.column-meta i, tfoot th.column-meta i"),i=n(this).closest("table"),a=i.find("tbody tr.coreactivity-hidden-row"),i=i.find("tbody td.column-meta button i");t.hasClass("d4p-ui-chevron-square-up")?(a.addClass("__hidden"),i.removeClass("d4p-ui-chevron-square-up d4p-ui-chevron-square-down").addClass("d4p-ui-chevron-square-down"),e.removeClass("d4p-ui-chevron-square-up").addClass("d4p-ui-chevron-square-down")):(a.removeClass("__hidden"),i.removeClass("d4p-ui-chevron-square-up d4p-ui-chevron-square-down").addClass("d4p-ui-chevron-square-up"),e.removeClass("d4p-ui-chevron-square-down").addClass("d4p-ui-chevron-square-up"))}),n(e).on("click","td.column-meta button",function(t){t.preventDefault();var t=n(this).find("i"),e=n(this).parent().parent().next();t.hasClass("d4p-ui-chevron-square-up")?(e.addClass("__hidden"),t.removeClass("d4p-ui-chevron-square-up").addClass("d4p-ui-chevron-square-down")):(e.removeClass("__hidden"),t.removeClass("d4p-ui-chevron-square-down").addClass("d4p-ui-chevron-square-up"))})},helpers:{toggle:function(t,e){var i;e.hasOwnProperty("toggle")&&""!==e.toggle&&(i=wp.coreactivity.admin.toggles,t.find("i").removeClass(i.on).removeClass(i.off).addClass(i[e.toggle]),t.find("span").html(t.data(e.toggle)))}},live:{init:function(){setTimeout(wp.coreactivity.admin.live.ajax,15e3)},ajax:function(){let a=[];const o=n(".coreactivity-grid-logs #the-list tr.coreactivity-hidden-row td").first().attr("colspan"),t=n(".coreactivity-grid-logs #the-list tr:not(.coreactivity-old-live-row) > td.hidden");n(".coreactivity-live-row").addClass("coreactivity-old-live-row").removeClass("coreactivity-standout").removeClass("coreactivity-live-row"),t.each(function(){var t=n(this).attr("class").split(" ")[0];a.indexOf(t)<0&&a.push(t)}),n.ajax({url:ajaxurl+"?action=coreactivity_live_logs",type:"post",dataType:"html",data:{args:JSON.stringify(coreactivity_live)},success:function(t){var e,i;0<t.length&&(e=t.indexOf("."),i=t.substring(0,e),t=t.substring(e+1),coreactivity_live.id=parseInt(i),n(".coreactivity-grid-logs #the-list").prepend(t),n(".coreactivity-live-row").addClass("coreactivity-standout"),n(".coreactivity-hidden-row.coreactivity-live-row > td").each(function(){n(this).attr("colspan",o)}),n(".coreactivity-live-row > td").each(function(){n(this).removeClass("hidden");let t=n(this).attr("class");t&&(t=t.split(" ")[0],-1<a.indexOf(t))&&n(this).addClass("hidden")})),setTimeout(wp.coreactivity.admin.live.ajax,15e3)}})}}},n(e).ready(function(){t.wp.coreactivity.admin.init(),0<n(".coreactivity-grid-logs").length&&(wp.coreactivity.admin.columns(),"Y"===coreactivity_data.live_updates)&&wp.coreactivity.admin.live.init()})}(jQuery,window,document);